graph TB
    %% Client Layer
    subgraph Client["ğŸ–¥ï¸ Client Layer"]
        WebApp[ğŸ“± Progressive Web App<br/>React/Vue.js]
        MobileApp[ğŸ“± Mobile App<br/>React Native/PWA]
        AdminPanel[âš™ï¸ Admin Dashboard<br/>React/Vue.js]
        DriverApp[ğŸš› Driver Mobile App<br/>React Native/PWA]
    end

    %% API Gateway
    APIGateway[ğŸšª API Gateway<br/>Kong/AWS API Gateway]

    %% Application Layer
    subgraph AppLayer["ğŸ”§ Application Layer"]
        AuthService[ğŸ” Authentication Service<br/>JWT + Ghana Card Verification]
        ProductService[ğŸ“¦ Product Service<br/>Catalog + Inventory Management]
        OrderService[ğŸ“‹ Order Service<br/>Cart + Order Processing]
        PaymentService[ğŸ’³ Payment Service<br/>Multi-Gateway Integration]
        CreditService[ğŸ’° Credit Management<br/>Auto Payment + Penalties]
        DeliveryService[ğŸšš Delivery Service<br/>Route + Distance Pricing]
        ServiceBooking[ğŸ—ï¸ Service Booking<br/>Consultancy + Scheduling]
        NotificationService[ğŸ“¢ Notification Service<br/>SMS + Email + Push]
        AnalyticsService[ğŸ“Š Analytics Service<br/>Reports + Business Intelligence]
    end

    %% Business Logic Layer
    subgraph BusinessLogic["ğŸ§  Business Logic Layer"]
        PricingEngine[ğŸ’² Pricing Engine<br/>Volume Discounts + Distance]
        InventorySync[ğŸ”„ Inventory Sync<br/>Real-time Stock Management]
        CreditEngine[ğŸ¦ Credit Processing<br/>Auto-deduction + Reminders]
        DeliveryOptimizer[ğŸ—ºï¸ Route Optimizer<br/>Zone Assignment + Tracking]
        ServiceScheduler[ğŸ“… Service Scheduler<br/>Consultant Management]
    end

    %% Data Layer
    subgraph DataLayer["ğŸ’¾ Data Layer"]
        MainDB[(ğŸ—„ï¸ Main Database<br/>PostgreSQL<br/>Users, Orders, Products)]
        CacheDB[(âš¡ Cache Layer<br/>Redis<br/>Sessions + Cart)]
        FileStorage[(ğŸ“ File Storage<br/>AWS S3/Local<br/>Images + Documents)]
        AnalyticsDB[(ğŸ“ˆ Analytics DB<br/>Time-series DB<br/>Business Metrics)]
    end

    %% External Services
    subgraph External["ğŸŒ External Services"]
        PaymentGateways[ğŸ’³ Payment Gateways<br/>Flutterwave + MTN MoMo<br/>Vodafone + Telecel + Banks]
        GhanaCardAPI[ğŸ†” Ghana Card API<br/>Identity Verification]
        GoogleMaps[ğŸ—ºï¸ Google Maps API<br/>Distance + Geocoding]
        SMSGateway[ğŸ“± SMS Gateway<br/>Bulk SMS Provider]
        EmailService[ğŸ“§ Email Service<br/>SendGrid/AWS SES]
        GoogleSheets[ğŸ“Š Google Sheets API<br/>Inventory Sync]
        BankAPIs[ğŸ¦ Bank APIs<br/>Automated Deductions]
    end

    %% Infrastructure
    subgraph Infrastructure["â˜ï¸ Infrastructure"]
        LoadBalancer[âš–ï¸ Load Balancer<br/>Nginx/AWS ALB]
        WebServer[ğŸ–¥ï¸ Web Servers<br/>Node.js/Docker]
        CDN[ğŸŒ CDN<br/>CloudFlare/AWS CloudFront]
        Monitoring[ğŸ“Š Monitoring<br/>Prometheus + Grafana]
        Backup[ğŸ’¾ Backup System<br/>Automated DB Backups]
    end

    %% Connections
    %% Client to API Gateway
    WebApp --> APIGateway
    MobileApp --> APIGateway
    AdminPanel --> APIGateway
    DriverApp --> APIGateway

    %% API Gateway to Services
    APIGateway --> AuthService
    APIGateway --> ProductService
    APIGateway --> OrderService
    APIGateway --> PaymentService
    APIGateway --> CreditService
    APIGateway --> DeliveryService
    APIGateway --> ServiceBooking
    APIGateway --> NotificationService
    APIGateway --> AnalyticsService

    %% Services to Business Logic
    ProductService --> InventorySync
    OrderService --> PricingEngine
    PaymentService --> CreditEngine
    DeliveryService --> DeliveryOptimizer
    ServiceBooking --> ServiceScheduler
    CreditService --> CreditEngine

    %% Business Logic to Data
    AuthService --> MainDB
    ProductService --> MainDB
    OrderService --> MainDB
    PaymentService --> MainDB
    CreditService --> MainDB
    DeliveryService --> MainDB
    ServiceBooking --> MainDB
    AnalyticsService --> AnalyticsDB

    %% Cache Layer
    AuthService --> CacheDB
    OrderService --> CacheDB
    ProductService --> CacheDB

    %% File Storage
    ProductService --> FileStorage
    AuthService --> FileStorage
    ServiceBooking --> FileStorage

    %% External Service Connections
    AuthService --> GhanaCardAPI
    PaymentService --> PaymentGateways
    CreditService --> BankAPIs
    DeliveryService --> GoogleMaps
    NotificationService --> SMSGateway
    NotificationService --> EmailService
    InventorySync --> GoogleSheets

    %% Infrastructure Connections
    APIGateway --> LoadBalancer
    LoadBalancer --> WebServer
    WebApp --> CDN
    MobileApp --> CDN
    WebServer --> Monitoring
    MainDB --> Backup
    AnalyticsDB --> Backup

    %% Styling
    classDef clientStyle fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef serviceStyle fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef dataStyle fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef externalStyle fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef infrastructureStyle fill:#fce4ec,stroke:#880e4f,stroke-width:2px

    class WebApp,MobileApp,AdminPanel,DriverApp clientStyle
    class AuthService,ProductService,OrderService,PaymentService,CreditService,DeliveryService,ServiceBooking,NotificationService,AnalyticsService serviceStyle
    class MainDB,CacheDB,FileStorage,AnalyticsDB dataStyle
    class PaymentGateways,GhanaCardAPI,GoogleMaps,SMSGateway,EmailService,GoogleSheets,BankAPIs externalStyle
    class LoadBalancer,WebServer,CDN,Monitoring,Backup infrastructureStyle